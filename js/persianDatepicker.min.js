!(function(t) {
  "use strict";
  function e(t, e) {
    return e ? e.split("-").reverse().join("/") : t;
  }
  function i(t) {
    for (var e = t + "", i = 0; i < e.length; i++)
      n.indexOf(e[i]) > -1 && (e = e.replace(new RegExp(e[i], "g"), n.indexOf(e[i])));
    return parseInt(e);
  }
  function n(t, e) {
    var i = "";
    return t < 10 && (t = "0" + t), e < 10 && (e = "0" + e), (i = t + "/" + e);
  }
  function o(t, e, i) {
    var n = 0;
    if (e <= 6) n = 31;
    else if (e <= 11) n = 30;
    else {
      for (
        var o = [-61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210, 1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178],
          a = 1;
        a < o.length;
        a++
      )
        if (t < o[a]) {
          n = 29;
          var r = t - o[a - 1],
            s = (o[a] - o[a - 1] - r - 1) % 33;
          s < 12 ? s % 4 === 0 && (n = 30) : (s === 0 || s === 1 || s === 2) && (n = 30);
          break;
        }
      n = 29;
    }
    return n;
  }
  function a(t, e, i) {
    var n,
      a,
      r,
      s,
      l,
      c,
      u,
      h,
      p,
      d,
      f,
      g = 0,
      y = 0;
    if (((p = t + 621), (s = e - 1), (l = i - 1), (n = 365 * p + Math.floor(p / 4) - Math.floor(p / 100) + Math.floor(p / 400) - 80 + l)), (d = n % 12053), (y = Math.floor(n / 12053)), (u = y + 979), (y = d % 1461), (h = Math.floor(d / 1461)), 468 > h && (h += 1), (f = h % 4), (g = Math.floor(h / 4)), (c = g * 365 + Math.floor((367 * f - 7) / 12) + l + 186), (a = Math.floor(c / 30)), (r = c % 30), 0 === r ? (a--, (r = 30)) : a >= 10 && ((a -= 10), (r += 30)), 12 === a) {
      u++, (a = 0);
    }
    return { year: u + 1, month: a + 1, day: r };
  }
  function r(t) {
    var e,
      i,
      n,
      o,
      a,
      r,
      s,
      l = 0,
      c = 0;
    if (((o = t[0]), (a = t[1]), (r = t[2]), (l = o - 979), (c = 0 === a ? 12 : a - 1), (n = r - 1), l <= -61 || l >= 3178))
      console.error("Invalid Jalaali year " + o);
    else {
      var u = function(t, e, i) {
        var n,
          o,
          a,
          r,
          s,
          l,
          c,
          u,
          h,
          p,
          d = 0,
          f = 0,
          g = 0,
          y = 0;
        for (
          c = new Date((l = i), (u = e - 1), (h = r = i - 1)),
            s = new Date(l, u, (h = r = i - 1 + 30)),
            p = new Date(l, u, (h = r = i + 1)),
            (d = Math.floor(c.getTime() / 864e5)),
            (f = Math.floor(s.getTime() / 864e5)),
            (g = Math.floor(p.getTime() / 864e5)),
            (y = Math.floor(n.getTime() / 864e5)),
            (d = y - d),
            (f = y - f),
            (g = y - g),
            1 === f && (d = 30),
            1 === g && (f = 31),
            d > 31
        ) {
          if (d > 365) return console.error("Invalid Jalaali date");
          return 30;
        }
        return d;
      }(o, a, r);
      (s = i(o, a, r)), (e = Math.floor(s / 31)), 1 === e ? (e = 0) : e >= 9 && (e += 3), (o -= e), (l = new Date(s + 1)), (c = o + 979), (a = e + 1), (r = s - 30 * e - 365 * (o - 979) - Math.floor((o - 979) / 4) + Math.floor((o - 979) / 100) - Math.floor((o - 979) / 400) + 80);
    }
    return { year: c, month: a, day: r };
  }
  var s,
    l,
    c,
    u,
    h,
    p,
    d,
    f,
    g,
    y,
    v,
    b,
    m,
    x,
    w,
    S,
    k,
    E,
    C,
    T,
    L,
    P,
    D,
    R,
    j,
    N,
    O,
    M = window.jQuery || window.$,
    F = {
      format: "YYYY/MM/DD",
      initialValue: !1,
      autoClose: !1,
      minDate: void 0,
      maxDate: void 0,
      calendar: { persian: { locale: "fa", holidays: [] } },
      toolbox: { todayButton: { enabled: !1 } },
      observer: !1,
      altField: void 0,
      altFormat: "YYYY/MM/DD",
      timePicker: { enabled: !1, hourStep: 1, minuteStep: 1 },
      highlightToday: !1,
      markHolidays: !1,
      markWeekends: !1,
      disableDates: [],
      disableHolidays: !1,
      disableWeekends: !1,
      toolbox: { todayButton: { enabled: !1 } },
    };
  M.fn.pDatepicker = function(t) {
    var e = M.extend({}, F, t);
    return this.each(function() {
      var t = M(this);
      if (t.data("pDatepicker")) return !0;
      var i = new n(t, e);
      t.data("pDatepicker", i);
    });
  };
  var n = function(t, e) {
    (this.$element = t), (this.options = e), this.init();
  };
  (n.prototype = {
    init: function() {
      this.build();
    },
    build: function() {
      var t = this;
      this.$element.on("focus", function(e) {
        e.preventDefault(), t.show();
      });
    },
    show: function() {
      if (this.$picker) return void this.hide();
      var t = this,
        e = this.$element,
        i = e.offset(),
        n = e.outerWidth(),
        o = M('<div class="p-datepicker"></div>'),
        a = M('<div class="p-datepicker-header"></div>'),
        r = M('<div class="p-datepicker-grid"></div>'),
        s = M('<div class="p-datepicker-toolbox"></div>'),
        l = this.options.calendar.persian.locale,
        c = this.options.toolbox.todayButton.enabled,
        u = this.options.format,
        h = this.options.altField,
        p = this.options.altFormat,
        d = 1400,
        f = 1;
      if (this.options.minDate) {
        var g = this.options.minDate;
        (d = g[0]), (f = g[1]);
      }
      var y = 1499,
        v = 12;
      if (this.options.maxDate) {
        var b = this.options.maxDate;
        (y = b[0]), (v = b[1]);
      }
      var m = d,
        x = f,
        w = y,
        S = v,
        k = m,
        E = x,
        C = k,
        T = E,
        L = [],
        P = [];
      L.push('<div class="p-datepicker-grid-header">'),
        L.push('<span>ش</span>'),
        L.push('<span>ی</span>'),
        L.push('<span>د</span>'),
        L.push('<span>س</span>'),
        L.push('<span>چ</span>'),
        L.push('<span>پ</span>'),
        L.push('<span>ج</span>'),
        L.push("</div>");
      var D = function(t, e) {
          var i = [];
          if (e <= 6) i = 31;
          else if (e <= 11) i = 30;
          else {
            for (var n = [-61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210, 1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178], o = 1; o < n.length; o++)
              if (t < n[o]) {
                i = 29;
                var a = t - n[o - 1],
                  r = (n[o] - n[o - 1] - a - 1) % 33;
                r < 12 ? r % 4 === 0 && (i = 30) : (r === 0 || r === 1 || r === 2) && (i = 30);
                break;
              }
            i = 29;
          }
          return i;
        }(C, T),
        R = new Date(C, T - 1, 1).getDay(),
        j = 0 === R ? 6 : R - 1,
        N = [],
        O = [];
      if (
        (O.push('<div class="p-datepicker-grid-body">'),
        O.push('<div class="p-datepicker-grid-row">'),
        Array(j + 1)
          .join(" ")
          .split(" ")
          .forEach(function(t) {
            O.push('<span class="p-datepicker-grid-cell p-datepicker-grid-cell-empty"></span>');
          }),
        O.push("</div><div class='p-datepicker-grid-row'>"),
        Array(D + 1)
          .join(" ")
          .split(" ")
          .forEach(function(t, e) {
            if (e > 0) {
              var i = e;
              O.push('<span class="p-datepicker-grid-cell" data-day="' + e + '" data-month="' + T + '" data-year="' + C + '">' + i + "</span>"), N.push(e);
            }
          }),
        O.push("</div>"),
        N.length > 35 && O.push("</div><div class='p-datepicker-grid-row'>"),
        N.length > 42 && O.push("</div><div class='p-datepicker-grid-row'>"),
        N.length > 49 && O.push("</div><div class='p-datepicker-grid-row'>"),
        r.append(L.join("")),
        r.append(O.join("")),
        a.append('<select class="p-datepicker-year-select">'),
        a.append('<select class="p-datepicker-month-select">'),
        s.append('<button type="button" class="p-datepicker-today-button">امروز</button>'),
        o.append(a),
        o.append(r),
        c && o.append(s),
        M("body").append(o),
        (this.$picker = o),
        this.$picker.css({ top: i.top + e.outerHeight() + 5, left: i.left + n / 2 - 142 }),
        this.bindEvents(),
        this.updateView(),
        !0)
    },
    bindEvents: function() {
      var t = this;
      this.$picker.on("click", ".p-datepicker-grid-cell", function(e) {
        var i = M(this).data("year"),
          n = M(this).data("month"),
          o = M(this).data("day"),
          a = e(r([i, n, o])),
          r = l(a.year, a.month, a.day),
          s = t.options.format,
          c = t.options.altFormat,
          u = t.options.altField,
          h = n(o, n, i, s),
          p = n(o, n, i, c);
        t.$element.val(h), u && M(u).val(p), t.options.autoClose && t.hide();
      }),
        this.$picker.on("change", ".p-datepicker-year-select,.p-datepicker-month-select", function(e) {
          var i = t.$picker.find(".p-datepicker-year-select").val(),
            n = t.$picker.find(".p-datepicker-month-select").val();
          t.render(i, n);
        }),
        this.$picker.on("click", ".p-datepicker-today-button", function(e) {
          var i = new Date(),
            n = l(i.getFullYear(), i.getMonth() + 1, i.getDate()),
            o = n(n.year, n.month, n.day, t.options.format);
          t.$element.val(o), t.options.autoClose && t.hide();
        }),
        M(document).on("click", function(e) {
          M(e.target).closest(".p-datepicker,.p-datepicker-input").length || t.hide();
        });
    },
    render: function(t, e) {
      var i = this,
        n = [],
        o = [],
        a = 1400,
        r = 1;
      if (this.options.minDate) {
        var s = this.options.minDate;
        (a = s[0]), (r = s[1]);
      }
      var l = 1499,
        c = 12;
      if (this.options.maxDate) {
        var u = this.options.maxDate;
        (l = u[0]), (c = u[1]);
      }
      for (var h = a; h <= l; h++) n.push('<option value="' + h + '">' + h + "</option>");
      for (var p = r; p <= c; p++) o.push('<option value="' + p + '">' + ["فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند"][p - 1] + "</option>");
      this.$picker.find(".p-datepicker-year-select").html(n.join("")).val(t),
        this.$picker.find(".p-datepicker-month-select").html(o.join("")).val(e);
      var d = function(t, e) {
          var i = [];
          if (e <= 6) i = 31;
          else if (e <= 11) i = 30;
          else {
            for (var n = [-61, 9, 38, 199, 426, 686, 756, 818, 1111, 1181, 1210, 1635, 2060, 2097, 2192, 2262, 2324, 2394, 2456, 3178], o = 1; o < n.length; o++)
              if (t < n[o]) {
                i = 29;
                var a = t - n[o - 1],
                  r = (n[o] - n[o - 1] - a - 1) % 33;
                r < 12 ? r % 4 === 0 && (i = 30) : (r === 0 || r === 1 || r === 2) && (i = 30);
                break;
              }
            i = 29;
          }
          return i;
        }(t, e),
        f = new Date(t, e - 1, 1).getDay(),
        g = 0 === f ? 6 : f - 1,
        y = [],
        v = [];
      y.push('<div class="p-datepicker-grid-header">'),
        y.push('<span>ش</span>'),
        y.push('<span>ی</span>'),
        y.push('<span>د</span>'),
        y.push('<span>س</span>'),
        y.push('<span>چ</span>'),
        y.push('<span>پ</span>'),
        y.push('<span>ج</span>'),
        y.push("</div>");
      var b = [];
      b.push('<div class="p-datepicker-grid-body">'),
        b.push('<div class="p-datepicker-grid-row">'),
        Array(g + 1)
          .join(" ")
          .split(" ")
          .forEach(function(t) {
            b.push('<span class="p-datepicker-grid-cell p-datepicker-grid-cell-empty"></span>');
          }),
        b.push("</div><div class='p-datepicker-grid-row'>"),
        Array(d + 1)
          .join(" ")
          .split(" ")
          .forEach(function(n, o) {
            if (o > 0) {
              var a = i(o);
              b.push('<span class="p-datepicker-grid-cell" data-day="' + o + '" data-month="' + e + '" data-year="' + t + '">' + a + "</span>"), y.push(o);
            }
          }),
        b.push("</div>"),
        y.length > 35 && b.push("</div><div class='p-datepicker-grid-row'>"),
        y.length > 42 && b.push("</div><div class='p-datepicker-grid-row'>"),
        y.length > 49 && b.push("</div><div class='p-datepicker-grid-row'>"),
        this.$picker.find(".p-datepicker-grid").html(y.join("") + b.join(""));
    },
    hide: function() {
      this.$picker && (this.$picker.remove(), (this.$picker = null));
    },
    destroy: function() {
      this.hide(), this.$element.off(".pDatepicker").removeData("pDatepicker");
    },
  }),
    (window.persianDatepicker = n);
})(window);
